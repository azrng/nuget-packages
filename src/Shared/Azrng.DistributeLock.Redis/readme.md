# 分布式锁

## 概述
借助redis来实现分布式锁的效果

## 基本要求

1.分布式系统，一个锁在同一时间只能被一个服务器获取（这是分布式锁的基础）  
2.具备锁失效机制，防止死锁（防止某些意外，锁没有得到方式，别人也无法获取到锁）  
3.不要使用固定的string值作为锁标记着(比如设置该redis的值和当前业务相关起来，如果删除的时候，值是该业务的值，再执行删除操作)，而是使用一个不易被猜中的随机值，比如token  
4.不适用del命令释放锁，而是发送script去移除key
> 3、4是为了解决：锁提前过期，客户a还没有执行完命令，然后客户b获取锁去执行，这个时候a执行完然后删除锁的时候将锁着b的锁给删除了